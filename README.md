# 自动化创建虚拟机

## 过程概述

1. 运行vmaker.sh，该脚本会读取当前目录下的kscfg文件
2. 遍历文件每一行，首先判断最后一个参数是否为done，如果为done标明该虚拟机已经创建成功，跳过
3. 判断虚拟机版本号，如果是centos6.x，则调用当前目录下的basic_centos6.sh,如果是centos7.x则调用当前目录下的basic_centos7.sh
4. 会在当前目录下创建一个临时执行脚本，执行该脚本可创建虚拟机
5. 如果创建成功，则按照运维组的习惯，将该脚本内容归档，并且将数据录入cmdb系统，并将配置文件中该行设为1；如果执行失败，则保留临时脚本，报错退出。
